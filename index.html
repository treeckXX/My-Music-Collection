<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music Collection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom CSS for audio player styling */
        input[type="range"] {
            -webkit-appearance: none;
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            background-image: linear-gradient(#3b82f6, #3b82f6);
            background-size: 0% 100%;
            background-repeat: no-repeat;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 15px;
            width: 15px;
            border-radius: 50%;
            background: #3b82f6;
            cursor: pointer;
            box-shadow: 0 0 2px 0 #555;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            background: #2563eb;
        }

        /* Animation for currently playing track */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .playing {
            animation: pulse 2s infinite;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1e293b;
        }

        ::-webkit-scrollbar-thumb {
            background: #3b82f6;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #2563eb;
        }

        /* Fade effect for tabs */
        .tab-content {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-gray-900 to-gray-800 min-h-screen text-white">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
                My Music Collection
            </h1>
            <p class="text-gray-300 max-w-2xl mx-auto">
                Browse your favorite music and podcasts. Click on any track to start playing.
            </p>
        </header>

        <!-- Main Player Section -->
        <div class="max-w-3xl mx-auto bg-gray-800 rounded-xl shadow-2xl overflow-hidden mb-12">
            <!-- Now Playing Info -->
            <div id="nowPlaying" class="p-6 bg-gradient-to-r from-gray-700 to-gray-800 flex items-center space-x-4">
                <div class="flex-shrink-0">
                    <img id="currentCover" src="https://via.placeholder.com/80" alt="Album Cover" class="w-16 h-16 rounded-md shadow-lg">
                </div>
                <div class="flex-grow">
                    <h3 id="currentTitle" class="text-xl font-semibold">Select a track</h3>
                    <p id="currentArtist" class="text-gray-300">-</p>
                    <div class="flex items-center mt-1">
                        <button id="favoriteBtn" class="text-gray-400 hover:text-red-500 mr-3 transition-colors">
                            <i class="far fa-heart"></i>
                        </button>
                        <span id="currentCategory" class="text-xs px-2 py-1 rounded-full bg-gray-600 text-gray-300">-</span>
                    </div>
                </div>
                <div class="flex-shrink-0 text-blue-400">
                    <i class="fas fa-music text-2xl"></i>
                </div>
            </div>

            <!-- Audio Player Controls -->
            <div class="p-6">
                <audio id="audioPlayer" class="w-full"></audio>
                <div class="flex items-center justify-between mb-2">
                    <span id="currentTime" class="text-sm text-gray-400">0:00</span>
                    <span id="duration" class="text-sm text-gray-400">0:00</span>
                </div>
                <input id="progressBar" type="range" value="0" class="w-full mb-6 cursor-pointer">
                
                <!-- Volume Control -->
                <div class="flex items-center justify-between mb-6">
                    <i class="fas fa-volume-down text-gray-400 mr-2"></i>
                    <input id="volumeControl" type="range" min="0" max="1" step="0.01" value="0.7" class="w-full max-w-xs cursor-pointer">
                    <i class="fas fa-volume-up text-gray-400 ml-2"></i>
                </div>

                <div class="flex items-center justify-center space-x-8">
                    <button id="prevBtn" class="text-gray-300 hover:text-white transition-colors">
                        <i class="fas fa-step-backward text-2xl"></i>
                    </button>
                    <button id="playBtn" class="bg-blue-600 hover:bg-blue-700 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-lg transition-all transform hover:scale-105">
                        <i class="fas fa-play text-xl"></i>
                    </button>
                    <button id="nextBtn" class="text-gray-300 hover:text-white transition-colors">
                        <i class="fas fa-step-forward text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="max-w-3xl mx-auto mb-6">
            <div class="flex border-b border-gray-700">
                <button id="musicTab" class="tab-btn px-4 py-2 font-medium text-blue-400 border-b-2 border-blue-400">
                    <i class="fas fa-music mr-2"></i> Music
                </button>
                <button id="podcastTab" class="tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                    <i class="fas fa-podcast mr-2"></i> Podcasts
                </button>
                <button id="favoritesTab" class="tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white">
                    <i class="fas fa-heart mr-2"></i> Favorites
                </button>
            </div>
        </div>

        <!-- Tab Content -->
        <div class="max-w-3xl mx-auto">
            <!-- Music Tab Content -->
            <div id="musicContent" class="tab-content">
                <h2 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-music mr-3 text-blue-400"></i>
                    My Music
                </h2>
                
                <div id="musicPlaylist" class="space-y-2 max-h-96 overflow-y-auto pr-2">
                    <!-- Example Song 1 -->
                    <div class="song bg-gray-800 hover:bg-gray-700 rounded-lg p-4 flex items-center cursor-pointer transition duration-200 group"
                        data-src="AXMO  le Shuuk  LePrince - I Like To Move It.mp3"
                        data-cover="bild2.img"
                        data-title="I like to move it"
                        data-artist="AXMO  le Shuuk  LePrince"
                        data-category="music">
                        <div class="flex-shrink-0 mr-4">
                            <img src="bild2.img" alt="Album Cover" class="w-12 h-12 rounded shadow">
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-medium">I like to move it</h3>
                            <p class="text-sm text-gray-400">AXMO  le Shuuk  LePrince</p>
                        </div>
                        <div class="flex-shrink-0 flex items-center">
                            <button class="favorite-star text-gray-500 hover:text-red-500 mr-3 opacity-0 group-hover:opacity-100 transition-all">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="text-gray-500">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Example Song 2 -->
                    <div class="song bg-gray-800 hover:bg-gray-700 rounded-lg p-4 flex items-center cursor-pointer transition duration-200 group"
                        data-src="Eibell - Mary On A Cross.mp3"
                        data-cover="bild1.img"
                        data-title="Mary On A Cross"
                        data-artist="Eibell"
                        data-category="music">
                        <div class="flex-shrink-0 mr-4">
                            <img src="bild1.img" alt="Album Cover" class="w-12 h-12 rounded shadow">
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-medium">Mary On A Cross</h3>
                            <p class="text-sm text-gray-400">Eibell</p>
                        </div>
                        <div class="flex-shrink-0 flex items-center">
                            <button class="favorite-star text-gray-500 hover:text-red-500 mr-3 opacity-0 group-hover:opacity-100 transition-all">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="text-gray-500">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                    </div>
                     <div class="song bg-gray-800 hover:bg-gray-700 rounded-lg p-4 flex items-center cursor-pointer transition duration-200 group"
                        data-src="Wham__Last_Christmas_REMIX.mp3"
                        data-cover="bild7.img"
                        data-title="Last Christmas (REMIX)"
                        data-artist="Wham"
                        data-category="music">
                        <div class="flex-shrink-0 mr-4">
                            <img src="bild7.img" alt="Album Cover" class="w-12 h-12 rounded shadow">
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-medium">Last Christmas (REMIX)</h3>
                            <p class="text-sm text-gray-400">Wham</p>
                        </div>
                        <div class="flex-shrink-0 flex items-center">
                            <button class="favorite-star text-gray-500 hover:text-red-500 mr-3 opacity-0 group-hover:opacity-100 transition-all">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="text-gray-500">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Podcast Tab Content -->
            <div id="podcastContent" class="tab-content hidden">
                <h2 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-podcast mr-3 text-blue-400"></i>
                    My Podcasts
                </h2>
                
                <div id="podcastPlaylist" class="space-y-2 max-h-96 overflow-y-auto pr-2">
                    <!-- Example Podcast 1 -->
                    <div class="song bg-gray-800 hover:bg-gray-700 rounded-lg p-4 flex items-center cursor-pointer transition duration-200 group"
                        data-src="podcasttest.m4a"
                        data-cover="bild8.img"
                        data-title="Mein eigener Podcast"
                        data-artist="XEAROX"
                        data-category="podcast">
                        <div class="flex-shrink-0 mr-4">
                            <img src="bild8.img" alt="Podcast Cover" class="w-12 h-12 rounded shadow">
                        </div>
                        <div class="flex-grow">
                            <h3 class="font-medium">Mein eigener Podcast</h3>
                            <p class="text-sm text-gray-400">TRECK</p>
                        </div>
                        <div class="flex-shrink-0 flex items-center">
                            <button class="favorite-star text-gray-500 hover:text-red-500 mr-3 opacity-0 group-hover:opacity-100 transition-all">
                                <i class="far fa-heart"></i>
                            </button>
                            <div class="text-gray-500">
                                <i class="fas fa-play"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Favorites Tab Content -->
            <div id="favoritesContent" class="tab-content hidden">
                <h2 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-heart mr-3 text-red-400"></i>
                    My Favorites
                </h2>
                
                <div id="favoritesPlaylist" class="space-y-2 max-h-96 overflow-y-auto pr-2">
                    <!-- Favorites will be added here dynamically -->
                    <p id="noFavorites" class="text-gray-400 text-center py-8">You haven't added any favorites yet. Click the heart icon on a track to add it here.</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="text-center py-8 text-gray-500 text-sm">
        <p>My Personal Music Collection • © <span id="year"></span></p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('year').textContent = new Date().getFullYear();

            // Audio player elements
            const audioPlayer = document.getElementById('audioPlayer');
            const progressBar = document.getElementById('progressBar');
            const currentTimeElement = document.getElementById('currentTime');
            const durationElement = document.getElementById('duration');
            const playBtn = document.getElementById('playBtn');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const currentTitle = document.getElementById('currentTitle');
            const currentArtist = document.getElementById('currentArtist');
            const currentCover = document.getElementById('currentCover');
            const currentCategory = document.getElementById('currentCategory');
            const favoriteBtn = document.getElementById('favoriteBtn');
            const volumeControl = document.getElementById('volumeControl');

            // Tab elements
            const musicTab = document.getElementById('musicTab');
            const podcastTab = document.getElementById('podcastTab');
            const favoritesTab = document.getElementById('favoritesTab');
            const musicContent = document.getElementById('musicContent');
            const podcastContent = document.getElementById('podcastContent');
            const favoritesContent = document.getElementById('favoritesContent');
            const musicPlaylist = document.getElementById('musicPlaylist');
            const podcastPlaylist = document.getElementById('podcastPlaylist');
            const favoritesPlaylist = document.getElementById('favoritesPlaylist');
            const noFavorites = document.getElementById('noFavorites');

            // All songs and favorites
            const songs = document.querySelectorAll('.song');
            let currentSongIndex = 0;
            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            let currentTab = 'music';

            // Format time from seconds to MM:SS
            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            }

            // Update progress bar and time
            function updateProgress() {
                progressBar.value = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                currentTimeElement.textContent = formatTime(audioPlayer.currentTime);

                if (!isNaN(audioPlayer.duration)) {
                    durationElement.textContent = formatTime(audioPlayer.duration);
                }
            }

            // Set progress bar when user seeks
            function setProgress() {
                audioPlayer.currentTime = (progressBar.value / 100) * audioPlayer.duration;
            }

            // Play or pause song
            function togglePlay() {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    playBtn.innerHTML = '<i class="fas fa-pause text-xl"></i>';

                    // Highlight currently playing song
                    songs.forEach(song => song.classList.remove('playing', 'bg-blue-900'));
                    if (songs[currentSongIndex]) {
                        songs[currentSongIndex].classList.add('playing', 'bg-blue-900');
                    }
                } else {
                    audioPlayer.pause();
                    playBtn.innerHTML = '<i class="fas fa-play text-xl"></i>';
                    if (songs[currentSongIndex]) {
                        songs[currentSongIndex].classList.remove('playing');
                    }
                }
            }

            // Load and play song
            function loadSong(index) {
                const song = songs[index];
                currentSongIndex = index;

                audioPlayer.src = song.getAttribute('data-src');
                currentTitle.textContent = song.getAttribute('data-title');
                currentArtist.textContent = song.getAttribute('data-artist');
                currentCover.src = song.getAttribute('data-cover');
                
                const category = song.getAttribute('data-category');
                currentCategory.textContent = category === 'music' ? 'Music' : 'Podcast';
                currentCategory.className = 'text-xs px-2 py-1 rounded-full ' + 
                    (category === 'music' ? 'bg-blue-900 text-blue-200' : 'bg-purple-900 text-purple-200');

                // Update favorite button state
                const isFavorite = favorites.includes(song.getAttribute('data-src'));
                favoriteBtn.innerHTML = isFavorite ? 
                    '<i class="fas fa-heart text-red-500"></i>' : 
                    '<i class="far fa-heart"></i>';

                // Update all song covers in playlist to match the one in data-cover
                const songCover = song.querySelector('img');
                if (songCover) {
                    songCover.src = song.getAttribute('data-cover');
                }

                audioPlayer.play()
                    .then(() => {
                        playBtn.innerHTML = '<i class="fas fa-pause text-xl"></i>';
                        songs.forEach(s => s.classList.remove('playing', 'bg-blue-900'));
                        song.classList.add('playing', 'bg-blue-900');
                    })
                    .catch(error => {
                        console.log('Auto-play was prevented:', error);
                    });
            }

            // Play next song
            function nextSong() {
                let nextIndex = (currentSongIndex + 1) % songs.length;
                
                // If we're in a specific tab, only play songs from that category
                if (currentTab !== 'favorites') {
                    while (songs[nextIndex].getAttribute('data-category') !== currentTab) {
                        nextIndex = (nextIndex + 1) % songs.length;
                        if (nextIndex === currentSongIndex) break; // Prevent infinite loop
                    }
                }
                
                loadSong(nextIndex);
            }

            // Play previous song
            function prevSong() {
                let prevIndex = (currentSongIndex - 1 + songs.length) % songs.length;
                
                // If we're in a specific tab, only play songs from that category
                if (currentTab !== 'favorites') {
                    while (songs[prevIndex].getAttribute('data-category') !== currentTab) {
                        prevIndex = (prevIndex - 1 + songs.length) % songs.length;
                        if (prevIndex === currentSongIndex) break; // Prevent infinite loop
                    }
                }
                
                loadSong(prevIndex);
            }

            // Toggle favorite status
            function toggleFavorite() {
                const currentSong = songs[currentSongIndex];
                const songSrc = currentSong.getAttribute('data-src');
                
                const index = favorites.indexOf(songSrc);
                if (index === -1) {
                    favorites.push(songSrc);
                    favoriteBtn.innerHTML = '<i class="fas fa-heart text-red-500"></i>';
                    
                    // Update the favorite star in the playlist
                    const stars = document.querySelectorAll('.favorite-star');
                    stars[currentSongIndex].innerHTML = '<i class="fas fa-heart text-red-500"></i>';
                } else {
                    favorites.splice(index, 1);
                    favoriteBtn.innerHTML = '<i class="far fa-heart"></i>';
                    
                    // Update the favorite star in the playlist
                    const stars = document.querySelectorAll('.favorite-star');
                    stars[currentSongIndex].innerHTML = '<i class="far fa-heart"></i>';
                    
                    // If we're in favorites tab, remove the song from view
                    if (currentTab === 'favorites') {
                        updateFavoritesView();
                    }
                }
                
                // Save to localStorage
                localStorage.setItem('favorites', JSON.stringify(favorites));
                
                // Update favorites view
                updateFavoritesView();
            }

            // Update the favorites view
            function updateFavoritesView() {
                favoritesPlaylist.innerHTML = '';
                
                if (favorites.length === 0) {
                    noFavorites.classList.remove('hidden');
                    return;
                }
                
                noFavorites.classList.add('hidden');
                
                favorites.forEach(favSrc => {
                    const songElement = Array.from(songs).find(song => 
                        song.getAttribute('data-src') === favSrc
                    );
                    
                    if (songElement) {
                        const clone = songElement.cloneNode(true);
                        clone.classList.remove('bg-blue-900', 'playing');
                        
                        // Make sure the heart is solid
                        const heart = clone.querySelector('.favorite-star i');
                        if (heart) {
                            heart.classList.remove('far');
                            heart.classList.add('fas', 'text-red-500');
                        }
                        
                        favoritesPlaylist.appendChild(clone);
                    }
                });
                
                // Reattach event listeners to cloned elements
                document.querySelectorAll('#favoritesPlaylist .song').forEach((song, index) => {
                    song.addEventListener('click', () => {
                        const src = song.getAttribute('data-src');
                        const songIndex = Array.from(songs).findIndex(s => 
                            s.getAttribute('data-src') === src
                        );
                        if (songIndex !== -1) {
                            loadSong(songIndex);
                        }
                    });
                    
                    const star = song.querySelector('.favorite-star');
                    if (star) {
                        star.addEventListener('click', (e) => {
                            e.stopPropagation();
                            const src = song.getAttribute('data-src');
                            const index = favorites.indexOf(src);
                            if (index !== -1) {
                                favorites.splice(index, 1);
                                localStorage.setItem('favorites', JSON.stringify(favorites));
                                updateFavoritesView();
                                
                                // Update the main list's star
                                const mainStar = document.querySelector(`.song[data-src="${src}"] .favorite-star i`);
                                if (mainStar) {
                                    mainStar.classList.remove('fas', 'text-red-500');
                                    mainStar.classList.add('far');
                                }
                                
                                // Update the player's favorite button if this is the current song
                                if (audioPlayer.src.endsWith(src)) {
                                    favoriteBtn.innerHTML = '<i class="far fa-heart"></i>';
                                }
                            }
                        });
                    }
                });
            }

            // Switch tabs
            function switchTab(tab) {
                currentTab = tab;
                
                // Update tab buttons
                musicTab.className = 'tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white';
                podcastTab.className = 'tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white';
                favoritesTab.className = 'tab-btn px-4 py-2 font-medium text-gray-400 hover:text-white';
                
                if (tab === 'music') {
                    musicTab.className = 'tab-btn px-4 py-2 font-medium text-blue-400 border-b-2 border-blue-400';
                    musicContent.classList.remove('hidden');
                    podcastContent.classList.add('hidden');
                    favoritesContent.classList.add('hidden');
                } else if (tab === 'podcast') {
                    podcastTab.className = 'tab-btn px-4 py-2 font-medium text-purple-400 border-b-2 border-purple-400';
                    musicContent.classList.add('hidden');
                    podcastContent.classList.remove('hidden');
                    favoritesContent.classList.add('hidden');
                } else if (tab === 'favorites') {
                    favoritesTab.className = 'tab-btn px-4 py-2 font-medium text-red-400 border-b-2 border-red-400';
                    musicContent.classList.add('hidden');
                    podcastContent.classList.add('hidden');
                    favoritesContent.classList.remove('hidden');
                    updateFavoritesView();
                }
            }

            // Event listeners
            playBtn.addEventListener('click', togglePlay);
            prevBtn.addEventListener('click', prevSong);
            nextBtn.addEventListener('click', nextSong);
            progressBar.addEventListener('input', setProgress);
            audioPlayer.addEventListener('timeupdate', updateProgress);
            audioPlayer.addEventListener('ended', nextSong);
            audioPlayer.addEventListener('loadedmetadata', function() {
                durationElement.textContent = formatTime(audioPlayer.duration);
            });
            
            // Volume control
            volumeControl.addEventListener('input', function() {
                audioPlayer.volume = this.value;
            });
            
            // Set initial volume
            audioPlayer.volume = volumeControl.value;

            // Favorite button
            favoriteBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleFavorite();
            });

            // Tab buttons
            musicTab.addEventListener('click', () => switchTab('music'));
            podcastTab.addEventListener('click', () => switchTab('podcast'));
            favoritesTab.addEventListener('click', () => switchTab('favorites'));

            // Click on song in playlist
            songs.forEach((song, index) => {
                song.addEventListener('click', () => {
                    loadSong(index);
                });
                
                // Favorite star in playlist
                const star = song.querySelector('.favorite-star');
                if (star) {
                    star.addEventListener('click', (e) => {
                        e.stopPropagation();
                        currentSongIndex = index;
                        toggleFavorite();
                    });
                    
                    // Set initial star state
                    if (favorites.includes(song.getAttribute('data-src'))) {
                        star.innerHTML = '<i class="fas fa-heart text-red-500"></i>';
                    }
                }
            });

            // Initialize with first song if available
            if (songs.length > 0) {
                loadSong(0);
            }
            
            // Initialize favorites view
            updateFavoritesView();
        });
    </script>
</body>
</html>
